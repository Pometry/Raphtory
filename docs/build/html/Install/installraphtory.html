<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installing Raphtory and Example Project &mdash; Raphtory 0.4.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Raphtory
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Raphtory</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installdependencies.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Ingestion/sprouter.html">Building a graph from your data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Analysis/analysis-explained.html">Analysis in Raphtory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Querying/presto.html">Querying in-flight data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python Library</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../PythonClient/tutorial.html">Getting your data into Jupyter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PythonClient/tutorial.html#example-notebook">Example Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PythonClient/RaphtoryClient.html">Raphtory Client</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deployment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Deployment/graphvsservice.html">Raphtory Graph VS Raphtory Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Deployment/deploymentlocal.html">Bare Metal Cluster Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Deployment/deploymentkube.html">Kubernetes Cluster Deployment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples Projects</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Examples/community-of-cheese.html">The Community of Cheese</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Examples/gab.html">Gab Social Network Analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Temporal Algorithms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Algorithms/tmotifcount.html">Motif Alpha</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Algorithms/mlpa.html">Multi-Layer Dynamic Community Detection</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Static Algorithms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Algorithms/connectedComponents.html">Connected Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Algorithms/degree.html">Degree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Algorithms/lpa.html">Label Propagation Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Algorithms/cbod.html">Outlier Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Algorithms/pageRank.html">Page Rank</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Algorithms/genericTaint.html">Tainting / Infection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Algorithms/triangleCount.html">Triangle Count</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Algorithms/twoHopNeighbors.html">Two-Hop Neighbours</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Algorithms/wattsCascade.html">Watts Cascade</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Raphtory</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Installing Raphtory and Example Project</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/Install/installraphtory.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="installing-raphtory-and-example-project">
<h1>Installing Raphtory and Example Project<a class="headerlink" href="#installing-raphtory-and-example-project" title="Permalink to this headline"></a></h1>
<p>Getting started with Raphtory only takes a few steps. We will use an example Raphtory project and install Scala Build Tool (SBT) to get it up and running. This quick start tutorial is based around a Lord of the Rings example, but there are several other examples available that it will work for.</p>
<section id="clone-the-example-project-and-add-the-latest-raphtory-release">
<h2>1. Clone the example project and add the latest Raphtory release<a class="headerlink" href="#clone-the-example-project-and-add-the-latest-raphtory-release" title="Permalink to this headline"></a></h2>
<p>To begin, clone the example repository from <a class="reference external" href="https://github.com/Raphtory/Examples.git">github</a> and download the latest stable build of <a class="reference external" href="https://github.com/Raphtory/Raphtory/releases/latest">Raphtory (0.4.0)</a>. Note that you can also find the nightly Raphtory build. However, it should not be used to avoid any differences between it and this tutorial. Create a <code class="docutils literal notranslate"><span class="pre">lib</span></code> directory at the root of the project and move the <code class="docutils literal notranslate"><span class="pre">raphtory.jar</span></code> into this directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/Raphtory/Examples.git
<span class="nb">cd</span> Examples
wget https://github.com/Raphtory/Raphtory/releases/download/0.4.0/raphtory-0.4.0.jar
mkdir lib <span class="p">|</span> mv raphtory-0.4.0.jar lib/
</pre></div>
</div>
</section>
<section id="install-sbt">
<h2>2. Install SBT<a class="headerlink" href="#install-sbt" title="Permalink to this headline"></a></h2>
<p>Install SBT by following the guide <a class="reference external" href="https://www.scala-sbt.org/1.x/docs/Setup.html">here</a>. The example project uses SBT to compile the source code.</p>
<p><strong>OR</strong></p>
<p>If you do not want to install sbt locally, prepend <code class="docutils literal notranslate"><span class="pre">sbt/bin</span></code> to all your commands to use the sbt included in the project.</p>
</section>
<section id="initiate-sbt">
<h2>3. Initiate SBT<a class="headerlink" href="#initiate-sbt" title="Permalink to this headline"></a></h2>
<p>Move into an example project directory (eg. <code class="docutils literal notranslate"><span class="pre">raphtory_example/raphtory-example-lotr</span></code>) and use the command <code class="docutils literal notranslate"><span class="pre">sbt</span></code> to start the Scala Build Tool. Once you see the <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> prompt, it means that you are in the SBT interactive shell.</p>
</section>
<section id="compile-and-run-the-code">
<h2>4. Compile and run the code<a class="headerlink" href="#compile-and-run-the-code" title="Permalink to this headline"></a></h2>
<p>Once prompted again with <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, you can run <code class="docutils literal notranslate"><span class="pre">compile</span></code> to build the project. This should produce the output below if working correctly:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>info<span class="o">]</span> Loading settings <span class="k">for</span> project global-plugins from idea.sbt ...
<span class="o">[</span>info<span class="o">]</span> Loading global plugins from /Users/you/.sbt/1.0/plugins
<span class="o">[</span>info<span class="o">]</span> Loading project definition from /Users/you/github/raphtory_example/raphtory-example-lotr
<span class="o">[</span>info<span class="o">]</span> Loading settings <span class="k">for</span> project examples from build.sbt ...
<span class="o">[</span>info<span class="o">]</span> Set current project to RaphtoryExamples <span class="o">(</span><span class="k">in</span> build file:/Users/you/github/raphtory_example/raphtory-example-lotr<span class="o">)</span>
<span class="o">[</span>info<span class="o">]</span> Executing <span class="k">in</span> batch mode. For better performance use sbt<span class="se">\&#39;</span>s shell
<span class="o">[</span>info<span class="o">]</span> Compiling <span class="m">41</span> Scala sources to /Users/you/github/raphtory_example/raphtory-example-lotr/target/scala-2.12/classes ...
<span class="o">[</span>warn<span class="o">]</span> there were two feature warnings<span class="p">;</span> re-run with -feature <span class="k">for</span> details
<span class="o">[</span>warn<span class="o">]</span> one warning found
<span class="o">[</span>success<span class="o">]</span> Total time: <span class="m">12</span> s, completed <span class="m">08</span>-Dec-2020 <span class="m">22</span>:35:31
</pre></div>
</div>
<p>To test that you have Raphtory working properly on your machine, use the command <code class="docutils literal notranslate"><span class="pre">run</span></code> when prompted again with <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>.</p>
<p>Summary of running SBT:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; sbt
&gt; compile
&gt; run
</pre></div>
</div>
<p>And you’re done!</p>
<p>This will run the Lord of the Rings example that we will come back to in the next few tutorials.</p>
<hr class="docutils" />
<p>We have left logging on <code class="docutils literal notranslate"><span class="pre">INFO</span></code> so that you can see what is going on in as Raphtory. Some example output is as follows:</p>
<p><strong>This is the system starting up</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">16</span>:28:55.591 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-5<span class="o">]</span> INFO  akka.event.slf4j.Slf4jLogger - Slf4jLogger started
<span class="m">16</span>:28:56.101 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-5<span class="o">]</span> INFO  a.r.artery.tcp.ArteryTcpTransport - Remoting started with transport <span class="o">[</span>Artery tcp<span class="o">]</span><span class="p">;</span> listening on address <span class="o">[</span>akka://Raphtory@127.0.0.1:1600<span class="o">]</span> with UID <span class="o">[</span>-8525538717996107206<span class="o">]</span>
<span class="m">16</span>:28:56.135 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-5<span class="o">]</span> INFO  akka.cluster.Cluster - Cluster Node <span class="o">[</span>akka://Raphtory@127.0.0.1:1600<span class="o">]</span> - Starting up, Akka version <span class="o">[</span><span class="m">2</span>.6.14<span class="o">]</span> ...
<span class="m">16</span>:28:56.276 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-5<span class="o">]</span> INFO  akka.cluster.Cluster - Cluster Node <span class="o">[</span>akka://Raphtory@127.0.0.1:1600<span class="o">]</span> - Registered cluster JMX MBean <span class="o">[</span>akka:type<span class="o">=</span>Cluster,port<span class="o">=</span><span class="m">1600</span><span class="o">]</span>
<span class="m">16</span>:28:56.276 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-5<span class="o">]</span> INFO  akka.cluster.Cluster - Cluster Node <span class="o">[</span>akka://Raphtory@127.0.0.1:1600<span class="o">]</span> - Started up successfully
<span class="m">16</span>:28:56.318 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-13<span class="o">]</span> INFO  akka.cluster.Cluster - Cluster Node <span class="o">[</span>akka://Raphtory@127.0.0.1:1600<span class="o">]</span> - No downing-provider-class configured, manual cluster downing required, see https://doc.akka.io/docs/akka/current/typed/cluster.html#downing
<span class="m">16</span>:28:56.351 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-13<span class="o">]</span> INFO  akka.cluster.Cluster - Cluster Node <span class="o">[</span>akka://Raphtory@127.0.0.1:1600<span class="o">]</span> - Node <span class="o">[</span>akka://Raphtory@127.0.0.1:1600<span class="o">]</span> is JOINING itself <span class="o">(</span>with roles <span class="o">[</span>dc-default<span class="o">]</span>, version <span class="o">[</span><span class="m">0</span>.0.0<span class="o">])</span> and forming new cluster
<span class="m">16</span>:28:56.354 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-13<span class="o">]</span> INFO  akka.cluster.Cluster - Cluster Node <span class="o">[</span>akka://Raphtory@127.0.0.1:1600<span class="o">]</span> - is the new leader among reachable nodes <span class="o">(</span>more leaders may exist<span class="o">)</span>
<span class="m">16</span>:28:56.366 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-13<span class="o">]</span> INFO  akka.cluster.Cluster - Cluster Node <span class="o">[</span>akka://Raphtory@127.0.0.1:1600<span class="o">]</span> - Leader is moving node <span class="o">[</span>akka://Raphtory@127.0.0.1:1600<span class="o">]</span> to <span class="o">[</span>Up<span class="o">]</span>
<span class="m">16</span>:28:58.730 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-13<span class="o">]</span> INFO  c.r.c.c.a.c.BuilderConnector - Builder Machine <span class="m">0</span> has come online.
<span class="m">16</span>:28:58.730 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-13<span class="o">]</span> INFO  c.r.c.c.a.c.BuilderConnector - Builder Machine <span class="m">1</span> has come online.
<span class="m">16</span>:28:58.733 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-13<span class="o">]</span> INFO  c.r.c.c.a.c.PartitionConnector - Partition Manager <span class="m">0</span> has come online.
<span class="m">16</span>:28:58.734 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-20<span class="o">]</span> INFO  c.r.c.c.a.c.PartitionConnector - Partition Manager <span class="m">1</span> has come online.
</pre></div>
</div>
<p>This shows that the ingestion components of Raphtory are online and as such the system is ready for analysis to be performed.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">22</span>:36:49.678 <span class="o">[</span>Citation-system-akka.actor.default-dispatcher-18<span class="o">]</span> INFO  c.r.c.a.C.RaphtoryReplicator - Router <span class="m">0</span> has come online.
<span class="m">22</span>:36:49.678 <span class="o">[</span>Citation-system-akka.actor.default-dispatcher-18<span class="o">]</span> INFO  c.r.c.a.C.RaphtoryReplicator - Partition Manager <span class="m">0</span> has come online.
Cluster Started: <span class="m">1</span> Graph Builders, <span class="m">1</span> Partitions, <span class="m">1</span> Spout, <span class="m">1</span> Query Manager
</pre></div>
</div>
<p><strong>During ingestion the watermark will increase.</strong> The watermark reports the status of
the paritions, and the time they believe is safe to execute on. Below, the first watermark reported shows that no data has been loaded into the partition manager, as both the minimum and maximum states are both at 0. The last watermark shows that the partitions have ingested the data and are now synced, as both minimum and maximum report the same result <code class="docutils literal notranslate"><span class="pre">32674</span></code> which is also the final timestamp in the file. Raphtory will only execute on time below the global minimum time to make sure the results are always correct.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">12</span>:03:56.230 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-5<span class="o">]</span> INFO  c.r.c.c.leader.WatermarkManager - Minimum Watermark: akka://Raphtory/user/write_0 <span class="m">0</span> Maximum Watermark: akka://Raphtory/user/write_0 <span class="m">0</span>
<span class="m">12</span>:04:06.250 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-19<span class="o">]</span> INFO  c.r.c.c.leader.WatermarkManager - Minimum Watermark: akka://Raphtory/user/write_0 <span class="m">25000</span> Maximum Watermark: akka://Raphtory/user/write_0 <span class="m">32674</span>
<span class="m">12</span>:05:03.360 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-19<span class="o">]</span> INFO  c.r.c.c.leader.WatermarkManager - Minimum Watermark: akka://Raphtory/user/write_0 <span class="m">32674</span> Maximum Watermark: akka://Raphtory/user/write_0 <span class="m">32674</span>
</pre></div>
</div>
<p>This confirms that our analysis jobs have been submitted and that the times they are requesting are yet to be available (and shall be retried soon). Once the required timestamp is avaialble, the analysis will be run.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">12</span>:03:36.445 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-13<span class="o">]</span> INFO  c.r.c.c.querymanager.QueryManager - Point Query received, your job ID is DegreesAnalyser_1637236996124
<span class="m">12</span>:03:36.508 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-19<span class="o">]</span> INFO  c.r.c.c.q.handler.PointQueryHandler - Perspective<span class="o">(</span><span class="m">32670</span>,None<span class="o">)</span> <span class="k">for</span> Job DegreesAnalyser_1637236996124 is not ready, currently at <span class="m">0</span>. Rechecking
Reading file lotr.csv
<span class="m">12</span>:03:46.207 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-5<span class="o">]</span> INFO  c.r.c.c.leader.WatermarkManager - Minimum Watermark: akka://Raphtory/user/write_0 <span class="m">32674</span> Maximum Watermark: akka://Raphtory/user/write_0 <span class="m">32674</span>
<span class="m">12</span>:03:46.636 <span class="o">[</span>Raphtory-akka.actor.default-dispatcher-5<span class="o">]</span> INFO  c.r.c.c.p.QueryExecutor - Executor <span class="k">for</span> Partition <span class="m">0</span> Job DegreesAnalyser_1637236996124 has been terminated
</pre></div>
</div>
<p><strong>Finally, output for the example queries should begin being saved to/tmp or the directory specified.</strong> Below is an example of the CSV file that has been output. This means that Raphtory is working as it should and you can move onto creating your first graph for analysis. Don’t worry too much about this at the moment as again it will be covered later.</p>
<div class="highlight-csv notranslate"><div class="highlight"><pre><span></span>32670,  Odo,      2
32670,  Samwise,  1
32670,  Elendil,  2
32670,  Valandil, 2
32670,  Angbor,   2
32670,  Arwen,    2
32670,  Treebeard,1
32670,  Óin,      3
32670,  Butterbur,1
32670,  Finduilas,2
32670,  Celebrimbor,2
32670,  Grimbeorn,2
32670,  Lobelia,  2
32670,  Helm,     1
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Ben Steer.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>